<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Send Gmail â€” Stealth</title>
<style>
  body {margin:0; font-family:sans-serif; background:#0c0c0c; color:#eee; overflow:hidden;}
  header {text-align:center; padding:20px;}
  h1 {font-size:2rem; color:#f0f0f0; margin-bottom:5px;}
  p {color:#888; margin-top:0;}
  .gmail-grid {display:flex; flex-wrap:wrap; justify-content:center; gap:12px; margin:20px auto; max-width:600px;}
  .gmail-btn {width:80px; height:80px; background:#111; border:1px solid #333; border-radius:12px; display:flex; flex-direction:column; align-items:center; justify-content:center; cursor:pointer; transition:0.3s;}
  .gmail-btn.active {border-color:#0f0; transform:scale(1.05);}
  .gmail-btn:hover {transform:scale(1.03);}
  .gmail-label {margin-top:6px; font-size:12px;}
  .input-number {display:block; margin:20px auto; width:240px; padding:10px; border-radius:8px; border:1px solid #333; background:#111; color:#eee;}
  .send-btn {display:block; margin:0 auto; padding:10px 20px; border:none; border-radius:8px; background:#222; color:#0f0; cursor:pointer; font-weight:bold; transition:0.2s;}
  .send-btn:hover {background:#333;}
  .result {max-width:400px; margin:10px auto; padding:10px; border-radius:8px; font-size:13px;}
  .success {background:#0f0a0f; border:1px solid #0f0; color:#0f0;}
  .failed {background:#300a0a; border:1px solid #f00; color:#f00;}
</style>
</head>
<body>

<header>
  <h1>SEND GMAIL</h1>
  <p>Stealth mode â€¢ Select Gmail account and input number</p>
</header>

<div class="gmail-grid" id="gmailGrid">
  <!-- Gmail buttons generated by JS -->
</div>

<input type="text" id="numberInput" class="input-number" placeholder="INPUT TARGET NUMBER (e.g., 628555555555)" />

<button class="send-btn" id="sendBtn">SEND GMAIL</button>

<div id="successBox" class="result success" style="display:none"></div>
<div id="failedBox" class="result failed" style="display:none"></div>

<script>
  const gmailGrid = document.getElementById('gmailGrid');
  const sendBtn = document.getElementById('sendBtn');
  const numberInput = document.getElementById('numberInput');
  const successBox = document.getElementById('successBox');
  const failedBox = document.getElementById('failedBox');

  let selectedGmail = 0;

  // generate Gmail 1-10 buttons
  for(let i=1;i<=10;i++){
    const btn = document.createElement('div');
    btn.classList.add('gmail-btn');
    if(i===1) btn.classList.add('active');
    btn.dataset.index = i-1;
    btn.innerHTML = `<div>ðŸ“§</div><div class="gmail-label">Gmail ${i}</div>`;
    btn.addEventListener('click', ()=>{
      document.querySelectorAll('.gmail-btn').forEach(b=>b.classList.remove('active'));
      btn.classList.add('active');
      selectedGmail = i-1;
    });
    gmailGrid.appendChild(btn);
  }

  sendBtn.addEventListener('click', async ()=>{
    const number = numberInput.value.trim();
    if(!number){ alert('Input the target number first!'); return; }

    sendBtn.disabled = true;
    sendBtn.textContent = 'Sending...';
    successBox.style.display = 'none';
    failedBox.style.display = 'none';

    try {
      const res = await fetch('/api/send.js', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ number, gmailIndex: selectedGmail })
      });
      const data = await res.json();

      if(res.ok){
        successBox.style.display='block';
        successBox.innerHTML = `<strong>SUCCESS SEND TO EMAIL TARGET</strong><br>
          TIME SEND: ${new Date().toLocaleString()}<br>
          MESSAGE ID: ${data.messageId || '9999'}`;
      } else {
        failedBox.style.display='block';
        failedBox.innerHTML = `<strong>FAILED TO SEND EMAIL</strong><br>${data.error || data.message || 'Unknown error'}`;
      }
    } catch(err){
      failedBox.style.display='block';
      failedBox.innerHTML = `<strong>FAILED TO SEND EMAIL</strong><br>Network error`;
    } finally {
      sendBtn.disabled=false;
      sendBtn.textContent='SEND GMAIL';
    }
  });
</script>

</body>
</html>
